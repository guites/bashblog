<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel><title>Blog do guilherme</title><link>https://guilhermegarcia.dev/blog/index.html</link>
<description>programa√ß√£o e outras coisas menos √∫teis</description><language>en</language>
<lastBuildDate>Sun, 26 Feb 2023 11:10:56 -0300</lastBuildDate>
<pubDate>Sun, 26 Feb 2023 11:10:56 -0300</pubDate>
<atom:link href="https://guilhermegarcia.dev/blog/feed.rss" rel="self" type="application/rss+xml" />
<item><title>
Usando subm√≥dulos do git em pipelines do Azure DevOps
</title><description><![CDATA[

<p>Este post explica como configurar o uso de git submodules em pipelines de CI/CD no Azure DevOps.</p>

<p>Em espec√≠fico, como configurar quando os <strong>subm√≥dulos fazem parte do mesmo projeto</strong>.</p>

<p>A solu√ß√£o envolve habilitar o "Checkout submodules" pelo painel do Azure, utilizar URLs relativas no arquivo .gitmodules e adicionar uma chave "resources" no arquivo .yaml da sua pipeline.</p>

<hr/>
<p>Tags: <a href='tag_azure.html'>azure</a>, <a href='tag_git.html'>git</a>, <a href='tag_ci.html'>ci</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/usando-submodulos-do-git-em-pipelines-do-azure-devops.html</link>
<guid>https://guilhermegarcia.dev/blog/./usando-submodulos-do-git-em-pipelines-do-azure-devops.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Thu, 23 Feb 2023 18:27:10 -0300</pubDate></item>
<item><title>
Symlinking python3 for vim on macOS
</title><description><![CDATA[

<p>Managing binaries in macos can be a shitshow, even with the assistance of great projects like <a href="https://brew.sh/">brew</a>.</p>

<p>One of brew's <a href="https://github.com/Homebrew/brew/issues/9285">most</a> <a href="https://docs.brew.sh/FAQ#why-does-brew-upgrade-formula-or-brew-install-formula-also-upgrade-a-bunch-of-other-stuff">debatable</a> feature is that installing a new package will, by default, trigger an automatic update of all existing packages. And this break things.</p>

<p>By installing some package I don't really remember the name, I ended up updating my python3 version, or rather, installing a new one, Python 3.11 .</p>

<p>This broke my beloved vim workflow :'( which uses <a href="https://github.com/psf/black">Black</a> for formatting (by running <code>:Black</code> inside vim) </p>

<p>So if you're on macOS running into the following error when running <code>:Black</code> from inside vim:</p>

<pre><code>    Error detected while processing /Users/guilhermegarcia/.vim/plugged/black/autoload/black.vim:
    line  214:
    Traceback (most recent call last):
      File "&lt;string&gt;", line 113, in &lt;module&gt;
      File "&lt;string&gt;", line 89, in _initialize_black_env
      File "/opt/homebrew/Cellar/python@3.11/3.11.1/Frameworks/Python.framework/Versions/3.11/lib/python3.11
    /venv/__init__.py", line 468, in create
        builder.create(env_dir)
      File "/opt/homebrew/Cellar/python@3.11/3.11.1/Frameworks/Python.framework/Versions/3.11/lib/python3.11
    /venv/__init__.py", line 74, in create
        self.setup_python(context)
      File "/opt/homebrew/Cellar/python@3.11/3.11.1/Frameworks/Python.framework/Versions/3.11/lib/python3.11
    /venv/__init__.py", line 292, in setup_python
        copier(context.executable, path)
      File "/opt/homebrew/Cellar/python@3.11/3.11.1/Frameworks/Python.framework/Versions/3.11/lib/python3.11
    /venv/__init__.py", line 235, in symlink_or_copy
        shutil.copyfile(src, dst)
      File "/opt/homebrew/Cellar/python@3.11/3.11.1/Frameworks/Python.framework/Versions/3.11/lib/python3.11
    /shutil.py", line 256, in copyfile
        with open(src, 'rb') as fsrc:
             ^^^^^^^^^^^^^^^
    FileNotFoundError: [Errno 2] No such file or directory: '/opt/homebrew/opt/python@3.11/Frameworks/Python
    .framework/Versions/3.11/bin/python3'
    Error detected while processing function black#Black:
    line   10:
    Traceback (most recent call last):
      File "&lt;string&gt;", line 1, in &lt;module&gt;
    NameError: name 'Black' is not defined
    Press ENTER or type command to continue
</code></pre>

<p>Turns out that somewhere, the psf/black plugin is trying to access a python binary that just isn't there:</p>

<pre><code>    guites@macos ~ % ls -l /opt/homebrew/opt/python@3.11/Frameworks/Python.framework/Versions/3.11/bin/python3
    ls: /opt/homebrew/opt/python@3.11/Frameworks/Python.framework/Versions/3.11/bin/python3: No such file or directory
</code></pre>

<p>It is actually at <code>/opt/homebrew/opt/python@3.11/Frameworks/Python.framework/Versions/3.11/bin/python3.11</code> (notice the <code>.11</code>)</p>

<p>So the most straightforward fix I've found is just creating a link between the non existing binary name and the correct python installation:</p>

<pre><code>    ln /opt/homebrew/opt/python@3.11/Frameworks/Python.framework/Versions/3.11/bin/python3.11 /opt/homebrew/opt/python@3.11/Frameworks/Python.framework/Versions/3.11/bin/python3
</code></pre>

<p>And from there on, it should just work. Inside vim:</p>

<pre><code>    :Black

    Please wait, one time setup for Black.

    Creating a virtualenv in /Users/guilhermegarcia/.vim/black...
    (this path can be customized in .vimrc by setting g:black_virtualenv)
    Installing Black with pip...
    DONE! You are all set, thanks for waiting ‚ú® üç∞ ‚ú®
    Pro-tip: to upgrade Black in the future, use the :BlackUpgrade command and restart Vim.
    Black: already well formatted, good job. (took 0.0057s)
    Press ENTER or type command to continue
</code></pre>

<p>Neat! You can safely remove the symlink (<code>unlink /opt/homebrew/opt/python@3.11/Frameworks/Python.framework/Versions/3.11/bin/python3</code>) after this step, but its not necessary.</p>

<p>For reference, I'm running vim 9.0 with <a href="https://github.com/junegunn/vim-plug">vim-plug</a>, and installed Black by adding the following lines to my .vimrc:</p>

<pre><code>    call plug#begin('~/.vim/plugged')

    Plug 'psf/black', { 'branch': 'stable' }

    call plug#end()
</code></pre>

<p>Some other links that didn't solve my problem:</p>

<ul>
<li><a href="https://github.com/psf/black/issues/2876">https://github.com/psf/black/issues/2876</a></li>
<li><a href="https://github.com/psf/black/issues/2503">https://github.com/psf/black/issues/2503</a></li>
<li><a href="https://github.com/psf/black/issues/2547">https://github.com/psf/black/issues/2547</a></li>
<li><a href="https://github.com/psf/black/issues/1379">https://github.com/psf/black/issues/1379</a></li>
<li><a href="https://stackoverflow.com/questions/36001966/unable-to-run-python-3-after-homebrew-installation">https://stackoverflow.com/questions/36001966/unable-to-run-python-3-after-homebrew-installation</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-fix-python-no-such-file-or-directory-compiler-errors-when-installing-packages">https://www.digitalocean.com/community/tutorials/how-to-fix-python-no-such-file-or-directory-compiler-errors-when-installing-packages</a></li>
</ul>

<p>Tags: <a href='tag_vim.html'>vim</a>, <a href='tag_cli.html'>cli</a>, <a href='tag_python.html'>python</a>, <a href='tag_macos.html'>macos</a></p>


<!-- text end -->
]]></description><link>https://guilhermegarcia.dev/blog/symlinking-python3-for-vim-on-macos.html</link>
<guid>https://guilhermegarcia.dev/blog/./symlinking-python3-for-vim-on-macos.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Tue, 21 Feb 2023 07:22:20 -0300</pubDate></item>
<item><title>
Remova os gifs do medium
</title><description><![CDATA[

<p>A plataforma medium tem muito conte√∫do bom, mas infelizmente muitas postagens √≥timas s√£o permeadas de gifs super coloridos, que eu considero distrativos.</p>

<p>Quando eu t√¥ procurando direcionamento sobre um t√≥pico, e finalmente acho um post sobre o assunto, eu n√£o gosto muito da mudan√ßa de tom que os gifs trazem, inseridos a cada par√°grafo, tipo um comic relief desnecess√°rio (<a href="https://www.google.com/search?channel=fs&amp;client=ubuntu&amp;q=jar+jar+binks">ahem</a>).</p>

<p>Da√≠ esse snippet esconde todos os gifs e p√µe um bot√£ozinho pra mostrar/esconder, a√≠ voc√™ pode dar uma olhada e desligar a coisa.</p>

<p><img src="./imgs/remova-os-gifs-do-medium/adding-bookmarklet.png" alt="Aba dos favoritos no firefox" title="Aba dos favoritos no firefox" /></p>

<p>Voc√™ pode ir "Add Bookmarks" e adicionar o seguinte, com um nome tipo "hide-medium-gifs":</p>

<pre><code>    javascript:(function() {const doc_imgs=document.querySelectorAll('img');function toggleImgVisibility(e){let prevSibling=e.target.previousElementSibling;while(prevSibling){if(prevSibling.classList.contains('hidden-g0f')){if(prevSibling.style.visibility=='hidden'){prevSibling.style.visibility='visible';}else{prevSibling.style.visibility='hidden';}break;}prevSibling=prevSibling.previousElementSibling;}}function createToggleBtn(){const button=document.createElement("BUTTON");button.innerText="Toggle gif visibility";button.addEventListener("click",toggleImgVisibility);return button;}doc_imgs.forEach((img) =&gt; {if (!img.src.includes('.gif')) return;img.classList.add("hidden-g0f");img.style.visibility = "hidden";img.parentElement.appendChild(createToggleBtn());});}())
</code></pre>

<p>Da√≠, em qualquer p√°gina do medium (por <a href="https://medium.com/perry-street-software-engineering/clean-api-architecture-2b57074084d5">exemplo...</a>), basta clicar no favorito criado, e pronto: gifs paus√°veis.</p>

<p><video controls style="width:100%;height:100%;"src="./imgs/remova-os-gifs-do-medium/hide-g0fs.mp4"></p>

<p>Abaixo eu explico melhor a fun√ß√£o.</p>

<hr/>
<p>Tags: <a href='tag_bookmarklet.html'>bookmarklet</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/remova-os-gifs-do-medium.html</link>
<guid>https://guilhermegarcia.dev/blog/./remova-os-gifs-do-medium.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Thu, 15 Dec 2022 20:27:42 -0300</pubDate></item>
<item><title>
Sempre pode suas redes
</title><description><![CDATA[

<p>S√©rio, sempre pode suas redes. Docker networks abandonadas, desligadas de qualquer container podem destruir sua internet.</p>

<p>Eu fiquei duas semanas com problema na internet da minha m√°quina: por algum motivo, na rede de casa, a conex√£o do ubuntu ficava falhando.</p>

<p>Hora penava pra resolver DNSs, hora parava de funcionar completamente. Mas √†s vezes (geralmente quando eu pedia ajuda) ela funcionava.</p>

<p>Tentei desabilitar o IPV6 nas configura√ß√µes de rede, desinstalar o <code>systemd-resolved</code>, mexer com o network manager, editar o /etc/resolv.conf diretamente.</p>

<p>Nada.</p>

<p>Em outras redes, na casa de amigos, na cafeteria, a internet funcionava. Eu cheguei a achar que meu provedor estava de sacanagem.</p>

<p>At√© que tive que ficar num airBnb, e o problema voltou.</p>

<p>Olhei pro roteador, e era o mesmo <code>d-link</code> que eu tinha em casa. J√° comecei a desenvolver uma crendice.</p>

<p>Acabou que n√£o pude ir at√© o fim, pois um dia rodei um <code>docker network ls</code> e notei que tinha muita coisa na listagem.</p>

<pre><code>    docker network prune
    &gt;Yes
</code></pre>

<p>E problema resolvido.</p>

<p>Se algu√©m souber mais sobre isso, ou como reproduzir o problema, por favor, <a href="mailto:gui.garcia67@gmail.com">entre em contato</a>.</p>

<p>Mas lembre-se: sempre pode suas redes.</p>

<p>Tags: <a href='tag_docker.html'>docker</a>, <a href='tag_dns.html'>dns</a>, <a href='tag_networking.html'>networking</a></p>



<!-- text end -->
]]></description><link>https://guilhermegarcia.dev/blog/sempre-pode-suas-redes.html</link>
<guid>https://guilhermegarcia.dev/blog/./sempre-pode-suas-redes.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Wed, 23 Nov 2022 16:39:35 -0300</pubDate></item>
<item><title>
Making home of the WSL 2
</title><description><![CDATA[

<p>Having recently migrated from Ubuntu to Windows as my work machine, many of the features that made my system feel like home were missing.</p>

<p>This post serves as a collection of solutions I found (and some I've adapted) from the web. Cheers!</p>

<hr/>
<p>Tags: <a href='tag_windows.html'>windows</a>, <a href='tag_wsl.html'>wsl</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/making-home-of-the-wsl-2.html</link>
<guid>https://guilhermegarcia.dev/blog/./making-home-of-the-wsl-2.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Tue, 22 Nov 2022 12:21:09 -0300</pubDate></item>
<item><title>
House cleaning com git
</title><description><![CDATA[

<p>Nesse post eu quero compartilhar com voc√™s algumas opera√ß√µes que eu tive que realizar em uns reposit√≥rios antigos, que estavam mal gerenciados e abandonados, pra que eu pudesse voltar a desenvolver neles.</p>

<p>As coisas que eu precisei aprender a fazer foram as seguintes:</p>

<ul>
<li>Listar autores de um reposit√≥rio</li>
<li>Filtrar os commits do reposit√≥rio por autor, pra ver o que cada um contribuiu</li>
<li>Relacionar combina√ß√µes de autores/email diferentes de um mesmo usu√°rio (usando o arquivo <code>.mailmap</code>)</li>
<li>Em um commit, ver quais arquivos foram alterados</li>
<li>Ver o que foi alterado em um arquivo espec√≠fico dentro de um commit</li>
<li>Verificar o hist√≥rico de altera√ß√£o de um arquivo no reposit√≥rio (git log arquivo.js)</li>
<li>Alterar o nome e autor de alguns commits, utilizando o <a href="https://github.com/newren/git-filter-repo">git-filter-repo</a></li>
</ul>

<p>Essas tarefas s√£o √≥timas pra se familiarizar (ou relembrar) com o andamento de um projeto, ver o ritmo das altera√ß√µes, quantas mudan√ßas costumam ser embaladas num mesmo commit, e criar um feeling sobre o perfil dos desenvolvedores de um projeto.</p>

<p>Tamb√©m servem pra organizar e arrumar o hist√≥rico e os meta dados dos commits passados, e por isso eu chamo de "House cleaning".</p>

<hr/>
<p>Tags: <a href='tag_git.html'>git</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/house-cleaning-com-git.html</link>
<guid>https://guilhermegarcia.dev/blog/./house-cleaning-com-git.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Mon, 14 Nov 2022 10:59:55 -0300</pubDate></item>
<item><title>
Busca sem backend - parte 1
</title><description><![CDATA[

<p><abbr title="muito grande;nem li">mg;nl</abbr>: Vamos ver como adicionar um mecanismo de busca em um site est√°tico. Neste post vamos criar um script que gera um arquivo json contendo os conte√∫dos do site, juntando o t√≠tulo, sum√°rio, tags e palavras chave geradas utilizando a ferramenta <a href="https://github.com/LIAAD/yake">yake</a>.</p>

<p>A barra de busca: essencial, mas de dificil implementa√ß√£o se voc√™ n√£o tiver acesso a um banco de dados. </p>

<p>Em sites din√¢micos, no qual o conte√∫do √© resgatado de um banco de dados a cada acesso, voc√™ pode utilizar um formul√°rio, que envia os valores digitados pelo usu√°rio (termos de busca) a um endpoint que as utiliza para realizar uma consulta no banco de dados, e retorna os resultados para o usu√°rio.</p>

<p>Em sites est√°ticos (como esse, que √© hospedado no <a href="https://pages.github.com/">github pages</a>), todo o conte√∫do dispon√≠vel para o usu√°rio precisa ser previamente criado e hospedado. Ou seja, n√£o temos como responder de forma din√¢mica √†s combina√ß√µes (praticamente infinitas) de palavras chave que um usu√°rio pode buscar.</p>

<p>Para um site pequeno, por√©m, podemos estruturar o conte√∫do em um formato de f√°cil consulta, como o <a href="https://www.json.org/json-en.html">json</a>, e deix√°-lo salvo no servidor. </p>

<p>Da√≠ podemos receber os termos de busca digitados pelo usu√°rio e usar algumas linhas de javascript para carregar o arquivo, aplicar o filtro, e retornar os resultados.</p>

<p>Neste primeiro post, vamos desenvolver um script em python que percorre as publica√ß√µes do site e formata as informa√ß√µes essenciais em um formato facilmente consult√°vel.</p>

<hr/>
<p>Tags: <a href='tag_python.html'>python</a>, <a href='tag_json.html'>json</a>, <a href='tag_busca.html'>busca</a>, <a href='tag_nlp.html'>nlp</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/busca-sem-backend---parte-1.html</link>
<guid>https://guilhermegarcia.dev/blog/./busca-sem-backend---parte-1.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Sun, 06 Nov 2022 15:36:37 -0300</pubDate></item>
<item><title>
Comparando json na linha de comando
</title><description><![CDATA[

<p><abbr title="muito grande;nem li">mg;nl</abbr>: vamos usar o <a href="https://vimdoc.sourceforge.net/htmldoc/diff.html">vimdiff</a> e o <a href="https://stedolan.github.io/jq/">jq</a> para comparar arquivos json independente da formata√ß√£o.</p>

<p>Comparar arquivos json parecidos pode ser complicado. Muitas vezes os arquivos foram formatados com espa√ßamentos diferentes, ou a diferen√ßa n√£o ocorre no mesmo n√≠vel hierarquico.</p>

<p>Vamos criar um script simples pra comparar arquivos json diretamente pelo terminal, usando o programa <code>jq</code> e o <code>vimdiff</code>.</p>

<p>Vamos ver tamb√©m como preparar um script bash pra lidar com erros conhecidos, como arquivos com json inv√°lido ou de outro formato.</p>

<p><aside>Os exemplos usados foram gerados usando <a href="https://json-generator.com">https://json-generator.com</a></aside></p>

<hr/>
<p>Tags: <a href='tag_json.html'>json</a>, <a href='tag_vimdiff.html'>vimdiff</a>, <a href='tag_cli.html'>cli</a>, <a href='tag_bash.html'>bash</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/comparando-json-na-linha-de-comando.html</link>
<guid>https://guilhermegarcia.dev/blog/./comparando-json-na-linha-de-comando.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Tue, 25 Oct 2022 22:45:36 -0300</pubDate></item>
<item><title>
A ordem dos exports importa
</title><description><![CDATA[

<p><abbr title="muito grande;nem li">mg;nl</abbr>: quando voc√™ utiliza um arquivo index.js para exportar m√≥dulos no react, a ordem dos exports pode quebrar seu app se dois m√≥dulos importam um ao outro, causando um <code>Uncaught TypeError: _MyModule__WEBPACK_IMPORTED_MODULE_1__ is undefined</code>.</p>

<p>O react tem uma funcionalidade muito boa, o <a href="https://create-react-app.dev/docs/importing-a-component/#absolute-imports">absolute imports</a>, que ajuda voc√™ a n√£o precisar ficar lidando com o caminho relativo entre os arquivos.</p>

<p>Se seu app tem uma estrutura do tipo</p>

<pre><code>    - src/
        - components/
        - pages/
</code></pre>

<p>Voc√™ pode, num arquivo em <code>src/pages/Home.jsx</code>, importar m√≥dulos de duas formas</p>

<pre><code>    // bad! &gt;:(
    import { ButtonGroup } from '../components/ButtonGroup';
    import { MyButton } from '../components/RadioGroup';

    // good! &gt;:)
    import { ButtonGroup, MyButton } from 'components';
</code></pre>

<p>Basta voc√™ largar um arquivo <code>jsconfig.json</code> na ra√≠z do seu projeto, passando o diret√≥rio <code>src/</code> como <code>baseUrl</code>:</p>

<pre><code>    {
      "compilerOptions": {
        "baseUrl": "src"
      },
      "include": ["src"]
    }
</code></pre>

<p>Por√©m existem algum gotchas quando voc√™ come√ßa a agrupar seus exports.</p>

<hr/>
<p>Tags: <a href='tag_react.html'>react</a>, <a href='tag_javascript.html'>javascript</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/a-ordem-dos-exports-importa.html</link>
<guid>https://guilhermegarcia.dev/blog/./a-ordem-dos-exports-importa.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Wed, 12 Oct 2022 01:57:25 -0300</pubDate></item>
<item><title>
Remova o feed do github
</title><description><![CDATA[

<p><abbr title="muito grande;nem li">mg;nl</abbr>: vamos criar um bookmarklet pra remover o feed da p√°gina inicial do github.</p>

<p>Se voc√™ √© como eu, provavelmente j√° entrou no seguinte loop:</p>

<ol>
<li>Voc√™ fica com d√∫vida sobre um projeto hospedado no github</li>
<li>Voc√™ acessa <a href="https://github.com">https://github.com</a>.</li>
<li>Voc√™ fica interessado no que as pessoas andaram fazendo, e acaba clicando em alguma coisa.</li>
<li>Voc√™ mata a curiosidade e sai do github.</li>
<li>????</li>
<li>Voc√™ lembra da d√∫vida sobre o projeto</li>
<li>repeat</li>
</ol>

<p>Vamos remover a distra√ß√£o da homepage do github usando um pouco de javascript.</p>

<hr/>
<p>Tags: <a href='tag_bookmarklet.html'>bookmarklet</a>, <a href='tag_javascript.html'>javascript</a></p>
]]></description><link>https://guilhermegarcia.dev/blog/remova-o-feed-do-github.html</link>
<guid>https://guilhermegarcia.dev/blog/./remova-o-feed-do-github.html</guid>
<dc:creator>Guilherme Garcia</dc:creator>
<pubDate>Mon, 10 Oct 2022 20:53:57 -0300</pubDate></item>
</channel></rss>
